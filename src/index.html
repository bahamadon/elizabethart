<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>The Art of Elizabeth Heth</title>
    <link rel="stylesheet" href="styles/main.css">
  </head>
  <body>
    <main>
      <div id="backSplash" class="darken dynamicMenu">
        <div id="subhead">the art of</div>
        <div id="mainhead"><h2>Elizabeth Heth</h2></div>
        <div id="menu-container">
          <svg id="menu-box" height="100" width="700" viewBox="0 0 700 100">
            <text id="label1" class="menuLabel dynamicMenu" data-href="content/biography.html" x="0" y="25" font-family="Lato" font-size="30" fill="darkorange" >Biography</text>
            <text id="label2" class="menuLabel dynamicMenu" data-href="content/exhibition.html" x="190" y="25" font-family="Lato" font-size="30" fill="deeppink">Exhibition</text>
            <text id="label3" class="menuLabel dynamicMenu" data-href="content/works.html" x="400" y="25" font-family="Lato" font-size="30" fill="springgreen">Works</text>
            <text id="label4" class="menuLabel dynamicMenu" data-href="content/contact.html" x="550" y="25" font-family="Lato" font-size="30" fill="dodgerblue">Contact</text>
          </svg>
          <div id="menu-symbol" class="dynamicMenu">
            <svg id="menu" viewBox="0 0 100 100">
              <circle cx="50" cy="50" r="48" fill="none" stroke="white" stroke-width="4"></circle>
              <line id="middle-bar" x1="26" x2="74" y1="50" y2="50" stroke="white" stroke-width="4"></line>
              <line id="top-bar" x1="26" x2="74" y1="26" y2="26" stroke="white" stroke-width="4"></line>
              <line id="bottom-bar" x1="26" x2="74" y1="74" y2="74" stroke="white" stroke-width="4"></line>
            </svg>
          </div>
        </div>
      </div>
    </main>

    <script>
      function hasClass(el, className) {
        return el.classList ? el.classList.contains(className) : new RegExp('\\b'+ className+'\\b').test(el.className);
      }

      function addClass(el, className) {
          if (el.classList) el.classList.add(className);
          else if (!hasClass(el, className)) el.className += ' ' + className;
      }

      function removeClass(el, className) {
          if (el.classList) el.classList.remove(className);
          else el.className = el.className.replace(new RegExp('\\b'+ className+'\\b', 'g'), '');
      }

      var topElem = document.getElementById('backSplash');
      var msElem = document.getElementById('menu-symbol');

      function moveMenu () {
        var dynamicSelector = ".dynamicMenu";
        var menuList = document.querySelectorAll(dynamicSelector);
        var listLength = menuList.length, i;


        for (i = 0; i < listLength; ++i) {
          if (hasClass(menuList[i], 'opening')) {
            removeClass(menuList[i], 'opening');
            addClass(menuList[i], 'closing');
          } else {
            removeClass(menuList[i], 'closing');
            addClass(menuList[i], 'opening');
          }
        }
      }

      function jumpTo (hreference) {
        var dest = hreference;
        return function () {
          console.log(dest);
        }
      }



      var navList = document.querySelectorAll(".menuLabel");
      var navListLength = navList.length, navi;
      for (navi = 0; navi < navListLength; ++navi) {
        navList[navi].addEventListener('click', (function () {
          var dest = navList[navi].dataset.href;
          return function (e) {
            moveMenu();
            topElem.addEventListener('webkitAnimationEnd', function (e) {
              if (e.target.id == this.id) {
                this.removeEventListener('webkitAnimationEnd',arguments.callee);
                window.location.assign(dest);
              }
            });
            };
          })() );
//          topElem.addEventListener('webkitAnimationEnd', jumpTo("Callback " + navi));
//          window.location.assign(this.dataset.href);

      };


      msElem.addEventListener('click', moveMenu);
//      document.addEventListener('webkitAnimationEnd', function (e) {
//        console.log(e);
//      });

//      msElem.addEventListener('webkitAnimationEnd', function(e) {
//            console.log(e);
//            if (e.animationName == "swipe-back")
//                window.location.assign("content/biography.html")});

    </script>


  </body>
</html>
